<!DOCTYPE html>
<html lang="en" >
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta charset="UTF-8">
	<title>MIDS W210 - Team Influencers</title>
	<baseddd href="https://autumninthecloud.github.io/IM_w_fairness/" target="_blank">

	<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic|Josefin+Slab:400,700italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="assets/css/main.css" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
	<link rel='stylesheet' href='main.css'>
	
	<style>
		html, body {
			height: 100%;
		}
		body { 
			font-size: 18px;
			font-weight: 300;
		}
		.panel {
			position: fixed;
			width: 100%;
			height: 100%;
			top: 0;
			left: 0;
		}
		
		section:not(.first) {
			opacity: 0;
			visibility: hidden;
			transform: scale(0.8);
		}
	</style>
	
	
	
</head>

<body translate="no" >
	<section class="first panel blue">
		<h1>Looped "Scrolling" Section Transitions</h1>
		<div class="scroll-down">Scroll up or down<div class="arrow"></div></div>
	</section>
	<section class="panel red">
		<h1>Hey look, another section</h1>
	</section>
	<section class="panel orange">
		<h1>These sections just keep coming</h1>
	</section>
	<section class="panel purple">
		<h1>Nice transitions though</h1>
	</section>
	<section class="panel green">
		<h1>How about we go back to the start after this?</h1>
	</section>
	
	
	
	

	<script src='gsap-latest-beta.min.js'></script>
	<script src='ScrollTrigger.min.js'></script>
	<script id="rendered-js" >
		let sections = gsap.utils.toArray("section"),
		currentSection = sections[0];
		
		gsap.defaults({ overwrite: 'auto', duration: 0.3 });
		
		// stretch out the body height according to however many sections there are. 
		gsap.set("body", { height: sections.length * 100 + "%" });
		
		// create a ScrollTrigger for each section
		sections.forEach((section, i) => {
			ScrollTrigger.create({
				// use dynamic scroll positions based on the window height (offset by half to make it feel natural)
				start: () => (i - 0.5) * innerHeight,
				end: () => (i + 0.5) * innerHeight,
				// when a new section activates (from either direction), set the section accordinglyl.
				onToggle: self => self.isActive && setSection(section) });
				
			});
			
			function setSection(newSection) {
				if (newSection !== currentSection) {
					gsap.to(currentSection, { scale: 0.8, autoAlpha: 0 });
					gsap.to(newSection, { scale: 1, autoAlpha: 1 });
					currentSection = newSection;
				}
			}
			
			// handles the infinite part, wrapping around at either end....
			ScrollTrigger.create({
				start: 1,
				end: () => ScrollTrigger.maxScroll(window) - 1,
				onLeaveBack: self => self.scroll(ScrollTrigger.maxScroll(window) - 2),
				onLeave: self => self.scroll(2) }).
				scroll(2);
				//# sourceURL=pen.js
			</script>
			
			
			
		</body>
		
		</html>
		
		
